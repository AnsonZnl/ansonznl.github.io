"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6400],{1203:(n,s,a)=>{a.r(s),a.d(s,{data:()=>p});const p={key:"v-40e038e6",path:"/articles/WeApp/%E8%A7%A3%E5%86%B3gif%E5%9B%BE%E7%89%87%E5%8F%AA%E6%B8%B2%E6%9F%93%E4%B8%80%E6%AC%A1%E7%9A%84%E9%97%AE%E9%A2%98.html",title:"",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"描述",slug:"描述",children:[]},{level:2,title:"附上代码",slug:"附上代码",children:[]}],filePathRelative:"articles/WeApp/解决gif图片只渲染一次的问题.md",git:{}}},1848:(n,s,a)=>{a.r(s),a.d(s,{default:()=>t});const p=(0,a(6252).uE)('<h2 id="描述" tabindex="-1"><a class="header-anchor" href="#描述" aria-hidden="true">#</a> 描述</h2><p>微信小程序开中，遇到 gif 图只执行一次的bug，经过多方测试，之后通过以下方式实现。</p><p><strong>问题描述</strong>：加载本地 gif 时，第一次播放之后始终保持在终点的状态，再次加载时，不会重新播放</p><p><strong>解决方案</strong>：把本地 gif 的路径换成线上的，然后在最后加上时间戳即可解决</p><p><strong>方案缺陷</strong>：可能会造成卡顿，但目前尚未找到更好的解决方案</p><h2 id="附上代码" tabindex="-1"><a class="header-anchor" href="#附上代码" aria-hidden="true">#</a> 附上代码</h2><p><strong>wxml</strong></p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">bindload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gifImgLoad<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{gifUrl}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>js</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  data<span class="token operator">:</span><span class="token punctuation">{</span>\n    gifUrl<span class="token operator">:</span> <span class="token string">&#39;http://xxx.com/xx.gif&#39;</span><span class="token punctuation">,</span><span class="token comment">//线上地址</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token comment">//图片加载成功之后执行</span>\n  <span class="token function">gifImgLoad</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> gifurl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>gifUrl<span class="token punctuation">;</span>\n    <span class="token keyword">var</span> nowTime <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        gifUrl<span class="token operator">:</span> gifurl <span class="token operator">+</span> <span class="token string">&#39;?&#39;</span> <span class="token operator">+</span> nowTime\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token comment">//一秒钟之后消失</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div>',10),t={render:function(n,s){return p}}}}]);