"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7567],{2434:(n,s,a)=>{a.r(s),a.d(s,{data:()=>p});const p={key:"v-acdd1734",path:"/articles/WeApp/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B9%8BiPhoneX%E9%80%82%E9%85%8D.html",title:"小程序之iPhone x适配",lang:"en-US",frontmatter:{},excerpt:"",headers:[],filePathRelative:"articles/WeApp/小程序之iPhoneX适配.md",git:{}}},2537:(n,s,a)=>{a.r(s),a.d(s,{default:()=>l});var p=a(6252);const t=(0,p.uE)('<h1 id="小程序之iphone-x适配" tabindex="-1"><a class="header-anchor" href="#小程序之iphone-x适配" aria-hidden="true">#</a> 小程序之iPhone x适配</h1><p>在开发小程序时，可能需要适配iPhone x 的时候，你会发现底部的横线会出现遮挡，这时候就要处理下：</p><p>在app.js中添加一个检测当前设备是否是iPhoneX的变量：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  globalData<span class="token operator">:</span> <span class="token punctuation">{</span>\n    userInfo<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n    isIphoneX<span class="token operator">:</span> <span class="token boolean">false</span><span class="token comment">//判断是否是iPhoneX</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token function-variable function">onShow</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>\n    wx<span class="token punctuation">.</span><span class="token function">getSystemInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// console.log(&#39;手机信息res&#39;+res.model)  </span>\n        <span class="token keyword">let</span> modelmes <span class="token operator">=</span> res<span class="token punctuation">.</span>model<span class="token punctuation">;</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>modelmes<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">&#39;iPhone X&#39;</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          that<span class="token punctuation">.</span>globalData<span class="token punctuation">.</span>isIphoneX <span class="token operator">=</span> <span class="token boolean">true</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>在需要做兼容的xxx.js中引入：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> app<span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\ndata<span class="token operator">:</span> <span class="token punctuation">{</span>\n  isIphoneX<span class="token operator">:</span> <span class="token boolean">false</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n      <span class="token comment">// 判断是否为iPhoneX</span>\n    <span class="token keyword">var</span> isIphoneX <span class="token operator">=</span> app<span class="token punctuation">.</span>globalData<span class="token punctuation">.</span>isIphoneX<span class="token punctuation">;</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isIphoneX <span class="token operator">?</span> <span class="token string">&#39;是iPhoneX&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;不是iPhoneX&#39;</span><span class="token punctuation">)</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      isIphoneX<span class="token operator">:</span> isIphoneX\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>然后在xx.wxml中对需要做兼容的元素做判断 ：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{isIphoneX ? <span class="token punctuation">&#39;</span>width30<span class="token punctuation">&#39;</span> : <span class="token punctuation">&#39;</span>width10<span class="token punctuation">&#39;</span>}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>然后在对应的wxss里设置好对应的类名就ok 了，比较简单方便。</p>',9),e=(0,p.Uk)("参考："),o={href:"https://www.imooc.com/article/details/id/33529",target:"_blank",rel:"noopener noreferrer"},c=(0,p.Uk)("小程序iPhone X 适配"),l={render:function(n,s){const a=(0,p.up)("OutboundLink");return(0,p.wg)(),(0,p.iD)(p.HY,null,[t,(0,p._)("p",null,[e,(0,p._)("a",o,[c,(0,p.Wm)(a)])])],64)}}}}]);